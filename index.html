{% extends "layout.html" %}

{% block head %}
<title> {{ table.title| d('n/a') | e }}  </title>
<meta name="description" content="{{ table.description | d('n/a') | e }}">
<meta name="author" content="">
{% endblock %}



{% block body %}
<!-- Fixed navbar -->
<nav class="navbar navbar-inverse navbar-fixed-bottom">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">{{ __('Toggle navigation') }}</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/index"><span class="glyphicon glyphicon-home"></span> {{ __('Index') }}</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<li><a id="action-edittable" href="" data-toggle="modal" data-target="#modal-edittable"><span class="glyphicon glyphicon glyphicon-pencil"></span> {{ __('Edit Table') }}</a></li>
				<li><a id="action-newtable" href=""><span class="glyphicon glyphicon-object-align-left"></span> {{ __('New table') }}</a></li>
				<li><a id="action-newcolumn" href=""><span class="glyphicon glyphicon-sound-stereo"></span> {{ __('New column') }}</a></li>
				<li><a id="action-loaddata" href="" data-toggle="modal" data-target="#modal-loaddata"><span class="glyphicon glyphicon-cloud-upload"></span> {{ __('Load data') }}</a></li>
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-cloud-download"></span> {{ __('Download') }}<span class="caret"></span></a>
					<ul class="dropdown-menu">
						<li>
							<a id="action-download-csv" href="">{{ __('CSV file') }}</a>
						</li>
						<li>
							<a id="action-download-nq" href="">{{ __('N-Quads file') }}</a>
						</li>
						<li>
							<a id="action-download-json" href="">{{ __('JSON LD file') }}</a>
						</li>
					</ul>
				</li>
			</ul>
		</div><!--/.nav-collapse -->
	</div>
</nav>

<div class="container-fuild">

	<h1>{{ table.title|d('n/a')|e }}</h1>
	<div>{{ table.description|d('n/a') }}</div>

	<div id="table-items">
		<table class="table table-bordered" data-resizable-columns-id="table-html">
			<thead>
				<tr>
					<th style="width: 0.5em"></th>
					{% for name, field in table._columns %}
					<th data-resizable-column-id="column-{{name}}">
						<span>{{field.label}}</span>
						<a href="" class="action-editcolumn pull-right" data-column-name='{{name}}' data-column='{{field|json}}'><span class="glyphicon glyphicon-edit" aria-hidden="true"></span></a>
					</th>
					{% endfor %}
				</tr>
			</thead>
			<tbody id="items-tbody">
			</tbody>
		</table>
	</div>

</div> <!-- /container -->

{% include "./templates/table-items.html" %}
{% include "./modals/edit-table.html" %}
{% include "./modals/load-data.html" %}
{% include "./modals/edit-column.html" %}

{% endblock %}

{% block styles %}
<link href="/libs/jsoneditor/dist/jsoneditor.min.css" rel="stylesheet" type="text/css">
<link href="/libs/jquery-resizable-columns/dist/jquery.resizableColumns.css" rel="stylesheet" type="text/css">
<link href="/libs/bootstrap3-wysiwyg/dist/bootstrap3-wysihtml5.min.css" rel="stylesheet" type="text/css">
{% endblock %}

{% block scripts %}
<script src="/libs/jquery-file-upload/js/vendor/jquery.ui.widget.js"></script>
<script src="/libs/jquery-file-upload/js/jquery.iframe-transport.js"></script>
<script src="/libs/jquery-file-upload/js/jquery.fileupload.js"></script>
<script src="/libs/jsoneditor/dist/jsoneditor.min.js"></script>
<script src="/libs/ace-builds/src-min/ace.js"></script>
<script src="/libs/store.js/store.min.js"></script>
<script src="/libs/jquery-resizable-columns/dist/jquery.resizableColumns.min.js"></script>
<script src="/libs/bootstrap3-wysiwyg/dist/bootstrap3-wysihtml5.all.min.js"></script>
<script>
var nColumns = {{table._columns.length|d(0)}};
</script>
<script src="/assets/js/main.js"></script>
{% endblock %}

